const fetchDeletePost=(postId,password)=>{fetch("https://community.bhsjp.kro.kr/delete-post",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:postId,password:password})}).then(res=>{return res.text()}).then(text=>{switch(text){case"ok":vex.dialog.alert({unsafeMessage:'글이 삭제되었습니다\n"글 보기" 페이지로 이동합니다',callback:()=>{location.href="https://community.bhsjp.kro.kr/view-posts/0"}});break;case"wrong-post":vex.dialog.open({message:"비밀번호를 입력해주세요",input:`\n                        <input name="password" type="password">\n                    `,callback:data=>{if(data){fetchDeletePost(postId,data.password)}else{vex.dialog.alert("글 삭제가 취소되었습니다")}}});break;case"invalid-user":vex.dialog.alert("이 글의 주인이 아닙니다");break;case"error":vex.dialog.alert({unsafeMessage:"서버 에러가 발생했습니다",callback:()=>{vex.dialog.open({message:"비밀번호를 입력해주세요",input:`\n                            <input name="password" type="password">\n                        `,callback:data=>{if(data){fetchPost(postId,data.password)}else{history.back()}}})}});break}})};