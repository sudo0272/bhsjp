const mysql=require("mysql");const escapeHtml=require("escape-html");const getMysqlConnectionData=require("../models/getMysqlConnectionData").getMysqlConnectionData;const connection=mysql.createConnection(getMysqlConnectionData());const encryptSha512=require("../models/encryptSha512").encryptSha512;const Aes256=require("../lib/Aes256");function createAccount(id,password,nickname,email){const aes256=new Aes256;return new Promise(resolve=>{connection.query("INSERT INTO `accounts` (`id`, `password`, `nickname`, `email`) VALUES (?, ?, ?, ?)",[aes256.encrypt(escapeHtml(id)),encryptSha512(password),aes256.encrypt(escapeHtml(nickname)),aes256.encrypt(escapeHtml(email))],(error,result,fields)=>{if(error){throw error}else{resolve("success")}})})}module.exports={createAccount:createAccount};